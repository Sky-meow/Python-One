#encoding:utf-8
from customer.models import SendingCust
from rest_framework.authentication import BaseAuthentication

def checkSending(request):   
    if request.method == 'GET':  
        openid = request.query_params.get('openid',None)
    else:
        openid = request.data.get('openid',None)
    if openid is None or openid == 'undefined' or openid == '':
            return None,'请先取得微信授权码'
    else:
        try:
            cust = SendingCust.objects.get(openid=openid)
            return cust,None
        except SendingCust.DoesNotExist:
            return None,'请先绑定微信'
        except Exception as e:
            return None,'内部错误%s'%e
